<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <style>
        #email-content {
            width: 500px;
            min-height: 200px;
            outline: none;
            border: 1px solid #000;
            padding: 10px;
            font-size: 20px;
            word-break: break-word;
            line-height: 30px;
        }

        #email-content>span {
            background-color: red;
            color: #fff;
            padding: 2px 8px;
        }
    </style>
</head>

<body>
    <div id="email-content" contentEditable='true'></div>
    <!-- Ram is a good boy and there is another bad person or guy sure i will pay -->

    <script>
        function catchPaste(evt, elem, callback) {
            debugger
            if (navigator.clipboard && navigator.clipboard.readText) {
                // modern approach with Clipboard API
                navigator.clipboard.readText().then(callback);
            } else {
                // Last resort fallback, using a timer
                setTimeout(function () {
                    callback(elem.value)
                }, 100);
            }
        }


        $('#email-content').on('paste', function (evt) {
            
            catchPaste(evt, this, function (sentence) {


                const spamWords = ['Dear friend','bad', 'guy', 'sure i will pay', 'Financial', 'privately owned funds', 'finance', 'guaranteed', '5%', 'Please', 'ASAP'];
                const spamWordsSet = new Set(spamWords);

                const result = sentence.split(" ").map(word => spamWordsSet.has(word.toLowerCase()) ? '<span>' + word + '</span>' : word);

                spamWords.forEach(word => sentence = sentence.replace(new RegExp(word, "ig"), '<span>' + word + '</span>'));
                $('#email-content').html(sentence)
            });
        });
            // let checkForSpam = (sentence) => {
            //     debugger;
            //     const spamWords = ['bad', 'guy', 'sure i will pay'];
            //     const spamWordsSet = new Set(spamWords);

            //     const result = sentence.split(" ").map(word => spamWordsSet.has(word.toLowerCase()) ? '<span>' + word + '</span>' : word);

            //     spamWords.forEach(word => sentence = sentence.replace(new RegExp(word, "ig"), '<span>' + word + '</span>'));
            //     $('#email-content').html(sentence)
            // }


            // let emailWords=[];

            // $('#email-content').each(function(data){
            //    let result = $(this).text().trim().split(' ');

            //    $.each(result,function (i,data) {
            //     emailWords.push(result[i]);
            //    });


            //    let spannedElement="";
            //    const intersection = spamWords.filter(element => emailWords.includes(element));
            //    $.each(result,function (i) {
            //         if(emailWords.includes(intersection[i])){
            //             let selectedWord='<span>'+intersection[i]+'</span>';
            //             spannedElement+=selectedWord;
            //         }
            //    });
            //     // console.log(spannedElement);
            // });


            // if(spamWords[i]===result[i]){
            //             var selectedWord='<span>'+result[i]+'</span>';
            //             spannedElement+=selectedWord;
            //         }
            //         console.log(spannedElement);


    </script>
</body>

</html>